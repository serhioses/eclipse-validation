!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("eclipse"),require("jquery"));else if("function"==typeof define&&define.amd)define(["eclipse","jquery"],t);else{var a="object"==typeof exports?t(require("eclipse"),require("jquery")):t(e.eclipse,e.jQuery);for(var n in a)("object"==typeof exports?exports:e)[n]=a[n]}}(this,function(e,t){return function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,a){"use strict";function n(){(0,s.default)(".ev-notice").remove()}function i(e){e.remove()}function l(e,t,a,n){var i=(0,s.default)("<div/>");a.length&&!(0,s.default)("#"+e).length&&(i.attr("id",e),i.text(n).addClass("ev-notice "+t).appendTo(a.closest(".ev-notice-parent")),setTimeout(function(){i.addClass("ev-notice--active")},4))}Object.defineProperty(t,"__esModule",{value:!0}),t.hideAllNotices=n,t.hideNotice=i,t.showNotice=l;var r=a(2),s=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t,a){return t.length&&e.length?RegExp(e,"g"+(a?"i":"")).test(t):null}function r(e){return l(k,e.toLowerCase())}function s(){var e=this;this._defaults.names.forEach(function(t){e.elements[t]=e.form.find('[name="'+t+'"]'),e.parents[t]=e.elements[t].closest(".ev-field-parent")})}function o(e){return"select-one"===e[0].type?!!e.val()&&"unselectable"!==e.val():"select-multiple"===e[0].type?!(!e.val().length||"unselectable"===e.val()[0]&&1===e.val().length):"radio"===e[0].type||("checkbox"===e[0].type?!!e.filter(":checked").length&&"unselectable"!==e.filter(":checked").first().val():!!e.val())}function d(e,t){var a=this,n=this._defaults;return n.names.filter(function(t){var i=a.elements[t];return n.rules[t].group===e&&!i.hasClass("ev-valid-item")&&!n.groups[e].marked[t]&&(n.groups[e].marked[t]=!0,o(i))})}function u(e,t){for(var a=0;a<L.length;a+=1){var n=L[a],i=void 0;if(!e.is(":disabled")&&h[n]&&void 0!==t[n]&&(i=h[n](e,t[n],t.options||{}),!i.value))return i}return{value:!0}}function c(e,t,a,n){var i,l=this,r={},s=this._defaults;if(!s.stopOnInvalid||!this.isStopped)if(a||(a=this._defaults.names.filter(function(t){return s.rules[t].group===e})),a.forEach(function(e){var a=s.rules[e],n=u.call(l,l.elements[e],a);r[e]=n,n.value?(t.countValid+=1,l.elements[e].data("ev-possibly-valid",!0)):l.elements[e].data("ev-possibly-error",!0)}),t.checked=!0,t.countValid>=t.requiredFields&&!n)t.isValid=!0,a.forEach(function(e){l.elements[e].data("ev-possibly-valid")&&(l.elements[e].addClass("ev-valid-item"),l.parents[e].addClass("ev-valid-item"),s.onSetValid())});else{this.e.preventDefault();try{a.forEach(function(e){if(l.elements[e].data("ev-possibly-error")){if(l.isFormValid=!1,l.elements[e].addClass("ev-invalid-item"),l.parents[e].addClass("ev-invalid-item"),i=s.messages[e]&&s.messages[e][r[e].parameter],i&&s.showNotice&&((0,p.showNotice)("notice-"+Math.random()+"-"+x,"",l.elements[e],i),x+=1),s.onSetInvalid(),l.firstInvalidField?s.setFocus&&l.firstInvalidField.focus():(l.firstInvalidField=l.elements[e],l.firstInvalidField.addClass("ev-invalid-item--first").closest(".ev-field-parent").addClass("ev-invalid-item--first"),s.scrollToInvalid&&y.default.DOM.scrollPage(l.firstInvalidField.closest(".ev-notice-parent"),s.scrollCorrection,s.scrollOptions).then(function(){s.setFocus&&l.firstInvalidField.focus(),s.afterScroll()})),s.stopOnInvalid)throw l.isStopped=!0,Error()}else l.elements[e].addClass("ev-valid-item"),l.parents[e].addClass("ev-valid-item")})}catch(e){s.onStopOnInvalid()}}}function v(){var e=this;try{this._defaults.names.forEach(function(t){var a,n,i,l,r=e._defaults,s=r.rules[t],v=!0;if(void 0!==s.group)n=r.groups[s.group],n.isValid||n.checked?n.isValid&&(i=d.call(e,s.group,n),i.length&&c.call(e,s.group,n,i,!0)):c.call(e,s.group,n);else if(s.checkIfChanged&&(o(e.elements[t])||(v=!1)),a=u.call(e,e.elements[t],s),e.elements[t].removeClass("ev-valid-item"),e.parents[t].removeClass("ev-valid-item"),!a.value&&v){if(e.isFormValid=!1,r.stopOnInvalid&&e.isStopped)throw Error();if(e.e.preventDefault(),e.elements[t].addClass("ev-invalid-item"),e.parents[t].addClass("ev-invalid-item"),l=r.messages[t]&&r.messages[t][a.parameter],l&&r.showNotice&&((0,p.showNotice)("notice-"+Math.random()+"-"+x,"",e.elements[t],l),x+=1),r.onSetInvalid(),e.firstInvalidField||(e.firstInvalidField=e.elements[t],e.firstInvalidField.addClass("ev-invalid-item--first").closest(".ev-notice-parent").addClass("ev-invalid-item--first"),r.scrollToInvalid?y.default.DOM.scrollPage(e.firstInvalidField.closest(".ev-notice-parent"),r.scrollCorrection,r.scrollOptions).then(function(){r.setFocus&&e.firstInvalidField.focus(),r.afterScroll()}):r.setFocus&&e.firstInvalidField.focus()),r.stopOnInvalid)throw e.isStopped=!0,Error()}else v&&(e.elements[t].addClass("ev-valid-item"),e.parents[t].addClass("ev-valid-item"),r.onSetValid())})}catch(e){this._defaults.onStopOnInvalid()}}function f(){this._defaults.groups.forEach(function(e){e.isValid=!1,e.countValid=0,e.checked=!1,e.marked={}})}Object.defineProperty(t,"__esModule",{value:!0});var m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();t.isPattern=l,t.isEmail=r;var h,p=a(0),g=a(1),y=n(g),C=a(2),b=n(C),k="^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$",L=["empty","minLength","maxLength","pattern","checked","selected","equalTo"],I=[],x=0;h={minLength:function(e,t){return{value:e.val().length>=t,parameter:"minLength"}},maxLength:function(e,t){return{value:e.val().length<=t,parameter:"maxLength"}},pattern:function(e,t,a){return this[t]?{value:this[t](e),parameter:"pattern"}:{value:l(t,e.val(),a.ignoreFlag),parameter:"pattern"}},equalTo:function(e,t){return{value:e.val()===(0,b.default)(t).val(),parameter:"equalTo"}},string:function(e){return e.val().length},empty:function(e){return{value:e.val().length,parameter:"empty"}},email:function(e){return r(e.val())},number:function(e){return!isNaN(parseFloat(e.val()))&&isFinite(parseFloat(e.val()))},hardNumber:function(e){return l("^\\d+$",e.val().toLowerCase())},checked:function(e,t,a){var n=0;return"radio"===e[0].type?{value:1===e.filter(":checked").length,parameter:"checked"}:(e.each(function(){(0,b.default)(this).prop("checked")===t&&"unselectable"!==(0,b.default)(this).val()&&(n+=1)}),a.checkedLength?{value:n===a.checkedLength,parameter:"checkedLength"}:a.minCheckedLength&&(n<a.minCheckedLength||!n)?{value:!1,parameter:"minCheckedLength"}:a.maxCheckedLength&&(n>a.maxCheckedLength||!n)?{value:!1,parameter:"maxCheckedLength"}:a.minCheckedLength&&a.maxCheckedLength&&(n<a.minCheckedLength||n>a.maxCheckedLength)?{value:!1,parameter:"rangeCheckedLength"}:{value:n>0,parameter:"checked"})},selected:function(e,t,a){var n=0;return"select-one"===e[0].type?{value:!!e.val()&&"unselectable"!==e.val(),parameter:"selected"}:(e.find("option").each(function(){(0,b.default)(this).prop("selected")&&!(0,b.default)(this).prop("disabled")&&"unselectable"!==(0,b.default)(this).val()&&(n+=1)}),a.selectedLength?{value:n===a.selectedLength,parameter:"selectedLength"}:a.minSelectedLength&&(n<a.minSelectedLength||!n)?{value:!1,parameter:"minSelectedLength"}:a.maxSelectedLength&&(n>a.maxSelectedLength||!n)?{value:!1,parameter:"maxSelectedLength"}:a.minSelectedLength&&a.maxSelectedLength&&(n<a.minSelectedLength||n>a.maxSelectedLength)?{value:!1,parameter:"rangeSelectedLength"}:{value:n>0,parameter:"selected"})}};var F=function(){function e(t,a){i(this,e);var n=Object.create(null);n.rules={},n.names=[],n.groups=[],n.messages={},n.scrollToInvalid=!0,n.scrollCorrection=0,n.scrollOptions={},n.showNotice=!0,n.stopOnInvalid=!0,n.setFocus=!0,n.onSetValid=b.default.noop,n.onSetInvalid=b.default.noop,n.afterScroll=b.default.noop,n.onStopOnInvalid=b.default.noop,"Object"===y.default.helpers.getClass(a)&&b.default.extend(!0,n,a),this.elements={},this.parents={},this.form=t,this.firstInvalidField=null,this.isFormValid=!0,Object.defineProperty(this,"_defaults",{get:function(){return n}}),s.call(this),this.form.attr("novalidate","novalidate"),I.push(this)}return m(e,[{key:"validate",value:function(e){var t=this;return this.e=e,this.isStopped=!1,this.isFormValid=!0,(0,p.hideAllNotices)(),Object.keys(this.elements).forEach(function(e){t.elements[e].removeClass("ev-invalid-item ev-valid-item ev-valid-item--first ev-invalid-item--first").data("ev-possibly-error","").data("ev-possibly-valid",""),t.parents[e].removeClass("ev-invalid-item ev-valid-item ev-valid-item--first ev-invalid-item--first")}),this.firstInvalidField=null,this._defaults.groups.length&&f.call(this),v.call(this),this.isFormValid}},{key:"validateField",value:function(e,t){var a,n,i=t.attr("name"),l=this.elements[i],r=this.parents[i],s=this._defaults.rules[i],d=this._defaults,c=!0,v=!0;return l.removeClass("ev-valid-item ev-invalid-item"),r.removeClass("ev-valid-item ev-invalid-item"),(0,p.hideNotice)(l.closest(".ev-notice-parent").find(".ev-notice")),o(l)||(c=!1),a=u.call(this,l,s),c&&!a.value?(v=!1,e.preventDefault(),l.addClass("ev-invalid-item"),r.addClass("ev-invalid-item"),(n=d.messages[i]&&d.messages[i][a.parameter])&&d.showNotice&&((0,p.showNotice)("notice-"+Math.random()+"-"+x,"",l,n),x+=1)):c&&a.value&&(v=!0,l.addClass("ev-valid-item"),r.addClass("ev-valid-item"),d.onSetValid()),v}}],[{key:"delegateSubmit",value:function(t){var a=e.findInstance(t);if(a)return a.validate(t)}},{key:"findInstance",value:function(t){var a=(0,b.default)(t.target).closest("[data-ev-form]");if(a.length)return e.instances().filter(function(e){return e.form.attr("id")===a.attr("id")})[0]}},{key:"instances",value:function(){return I}},{key:"extendValidationProps",value:function(e){e.forEach(function(e){y.default.helpers.inArray(L,e.name)||Object.prototype.hasOwnProperty.call(h,e.name)||(L.push(e.name),h[e.name]=e.value)})}}]),e}();t.default=F},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=a(1),l=n(i),r=a(3),s=n(r),o=a(0),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(o);l.default.utils.namespace("forms"),l.default.utils.namespace("forms.notice"),l.default.forms.Validation=s.default,l.default.forms.notice=d}])});