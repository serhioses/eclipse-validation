!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("eclipse"),require("jquery"));else if("function"==typeof define&&define.amd)define(["eclipse","jquery"],t);else{var a="object"==typeof exports?t(require("eclipse"),require("jquery")):t(e.eclipse,e.jQuery);for(var i in a)("object"==typeof exports?exports:e)[i]=a[i]}}(this,function(e,t){return function(e){function t(i){if(a[i])return a[i].exports;var n=a[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,i){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,a){"use strict";function i(){(0,r.default)(".ev-notice").remove()}function n(e){e.remove()}function l(e,t,a,i){var n=(0,r.default)("<div/>");a.length&&!(0,r.default)("#"+e).length&&(n.attr("id",e),n.text(i).addClass("ev-notice "+t).appendTo(a.closest(".ev-notice-parent")),setTimeout(function(){n.addClass("ev-notice--active")},4))}Object.defineProperty(t,"__esModule",{value:!0}),t.hideAllNotices=i,t.hideNotice=n,t.showNotice=l;var s=a(2),r=function(e){return e&&e.__esModule?e:{default:e}}(s)},function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t,a){return t.length&&e.length?RegExp(e,"g"+(a?"i":"")).test(t):null}function s(e){return l(k,e.toLowerCase())}function r(){var e=this;this._defaults.names.forEach(function(t){e.elements[t]=e.form.find('[name="'+t+'"]'),e.parents[t]=e.elements[t].closest(".ev-field-parent")})}function o(e){return"select-one"===e[0].type?!!e.val()&&"unselectable"!==e.val():"select-multiple"===e[0].type?!(!e.val().length||"unselectable"===e.val()[0]&&1===e.val().length):"radio"===e[0].type||("checkbox"===e[0].type?!!e.filter(":checked").length&&"unselectable"!==e.filter(":checked").first().val():!!e.val())}function d(e,t){var a=this,i=this._defaults;return i.names.filter(function(t){var n=a.elements[t];return i.rules[t].group===e&&!n.hasClass("ev-valid-item")&&!i.groups[e].marked[t]&&(i.groups[e].marked[t]=!0,o(n))})}function u(e,t){for(var a=0;a<L.length;a+=1){var i=L[a],n=void 0;if(!e.is(":disabled")&&h[i]&&void 0!==t[i]&&(n=h[i](e,t[i],t.options||{}),!n.value))return n}return{value:!0}}function c(e,t,a,i){var n,l=this,s={},r=this._defaults;if(!r.stopOnInvalid||!this.isStopped)if(a||(a=this._defaults.names.filter(function(t){return r.rules[t].group===e})),a.forEach(function(e){var a=r.rules[e],i=u.call(l,l.elements[e],a);s[e]=i,i.value?(t.countValid+=1,l.elements[e].data("ev-possibly-valid",!0)):l.elements[e].data("ev-possibly-error",!0)}),t.checked=!0,t.countValid>=t.requiredFields&&!i)t.isValid=!0,a.forEach(function(e){l.elements[e].data("ev-possibly-valid")&&(l.elements[e].addClass("ev-valid-item"),l.parents[e].addClass("ev-valid-item"),r.onSetValid())});else{this.e.preventDefault();try{a.forEach(function(e){if(l.elements[e].data("ev-possibly-error")){if(l.isFormValid=!1,l.elements[e].addClass("ev-invalid-item"),l.parents[e].addClass("ev-invalid-item"),n=r.messages[e]&&r.messages[e][s[e].parameter],n&&r.showNotice&&((0,p.showNotice)("notice-"+Math.random()+"-"+I,"",l.elements[e],n),I+=1),r.onSetInvalid(),l.firstInvalidField?r.setFocus&&l.firstInvalidField.focus():(l.firstInvalidField=l.elements[e],l.firstInvalidField.addClass("ev-invalid-item--first").closest(".ev-field-parent").addClass("ev-invalid-item--first"),r.scrollToInvalid&&C.default.DOM.scrollPage(l.firstInvalidField.closest(".ev-notice-parent"),r.scrollCorrection,r.scrollOptions).then(function(){r.setFocus&&l.firstInvalidField.focus(),r.afterScroll()})),r.stopOnInvalid)throw l.isStopped=!0,Error()}else l.elements[e].addClass("ev-valid-item"),l.parents[e].addClass("ev-valid-item")})}catch(e){r.onStopOnInvalid()}}}function v(){var e=this;try{this._defaults.names.forEach(function(t){var a,i,n,l,s=e._defaults,r=s.rules[t],v=!0;if(void 0!==r.group)i=s.groups[r.group],i.isValid||i.checked?i.isValid&&(n=d.call(e,r.group,i),n.length&&c.call(e,r.group,i,n,!0)):c.call(e,r.group,i);else if(r.checkIfChanged&&(o(e.elements[t])||(v=!1)),a=u.call(e,e.elements[t],r),e.elements[t].removeClass("ev-valid-item"),e.parents[t].removeClass("ev-valid-item"),!a.value&&v){if(e.isFormValid=!1,s.stopOnInvalid&&e.isStopped)throw Error();if(e.e.preventDefault(),e.elements[t].addClass("ev-invalid-item"),e.parents[t].addClass("ev-invalid-item"),l=s.messages[t]&&s.messages[t][a.parameter],l&&s.showNotice&&((0,p.showNotice)("notice-"+Math.random()+"-"+I,"",e.elements[t],l),I+=1),s.onSetInvalid(),e.firstInvalidField||(e.firstInvalidField=e.elements[t],e.firstInvalidField.addClass("ev-invalid-item--first").closest(".ev-notice-parent").addClass("ev-invalid-item--first"),s.scrollToInvalid?C.default.DOM.scrollPage(e.firstInvalidField.closest(".ev-notice-parent"),s.scrollCorrection,s.scrollOptions).then(function(){s.setFocus&&e.firstInvalidField.focus(),s.afterScroll()}):s.setFocus&&e.firstInvalidField.focus()),s.stopOnInvalid)throw e.isStopped=!0,Error()}else v&&(e.elements[t].addClass("ev-valid-item"),e.parents[t].addClass("ev-valid-item"),s.onSetValid())})}catch(e){this._defaults.onStopOnInvalid()}}function f(){this._defaults.groups.forEach(function(e){e.isValid=!1,e.countValid=0,e.checked=!1,e.marked={}})}Object.defineProperty(t,"__esModule",{value:!0});var m=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();t.isPattern=l,t.isEmail=s;var h,p=a(0),g=a(1),C=i(g),y=a(2),b=i(y),k="^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$",L=["minLength","maxLength","pattern","checked","selected","equalTo"],F=[],I=0;h={minLength:function(e,t){return{value:e.val().length>=t,parameter:"minLength"}},maxLength:function(e,t){return{value:e.val().length<=t,parameter:"maxLength"}},pattern:function(e,t,a){return this[t]?{value:this[t](e),parameter:"pattern"}:{value:l(t,e.val(),a.ignoreFlag),parameter:"pattern"}},equalTo:function(e,t){return{value:e.val()===(0,b.default)(t).val(),parameter:"equalTo"}},string:function(e){return e.val().length},email:function(e){return s(e.val())},number:function(e){return!isNaN(parseFloat(e.val()))&&isFinite(parseFloat(e.val()))},hardNumber:function(e){return l("^\\d+$",e.val().toLowerCase())},checked:function(e,t,a){var i=0;return"radio"===e[0].type?{value:1===e.filter(":checked").length,parameter:"checked"}:(e.each(function(){(0,b.default)(this).prop("checked")===t&&"unselectable"!==(0,b.default)(this).val()&&(i+=1)}),a.checkedLength?{value:i===a.checkedLength,parameter:"checkedLength"}:a.minCheckedLength&&(i<a.minCheckedLength||!i)?{value:!1,parameter:"minCheckedLength"}:a.maxCheckedLength&&(i>a.maxCheckedLength||!i)?{value:!1,parameter:"maxCheckedLength"}:a.minCheckedLength&&a.maxCheckedLength&&(i<a.minCheckedLength||i>a.maxCheckedLength)?{value:!1,parameter:"rangeCheckedLength"}:{value:i>0,parameter:"checked"})},selected:function(e,t,a){var i=0;return"select-one"===e[0].type?{value:!!e.val()&&"unselectable"!==e.val(),parameter:"selected"}:(e.find("option").each(function(){(0,b.default)(this).prop("selected")&&!(0,b.default)(this).prop("disabled")&&"unselectable"!==(0,b.default)(this).val()&&(i+=1)}),a.selectedLength?{value:i===a.selectedLength,parameter:"selectedLength"}:a.minSelectedLength&&(i<a.minSelectedLength||!i)?{value:!1,parameter:"minSelectedLength"}:a.maxSelectedLength&&(i>a.maxSelectedLength||!i)?{value:!1,parameter:"maxSelectedLength"}:a.minSelectedLength&&a.maxSelectedLength&&(i<a.minSelectedLength||i>a.maxSelectedLength)?{value:!1,parameter:"rangeSelectedLength"}:{value:i>0,parameter:"selected"})}};var S=function(){function e(t,a){n(this,e);var i=Object.create(null);i.rules={},i.names=[],i.groups=[],i.messages={},i.scrollToInvalid=!0,i.scrollCorrection=0,i.scrollOptions={},i.showNotice=!0,i.stopOnInvalid=!0,i.setFocus=!0,i.onSetValid=b.default.noop,i.onSetInvalid=b.default.noop,i.afterScroll=b.default.noop,i.onStopOnInvalid=b.default.noop,"Object"===C.default.helpers.getClass(a)&&b.default.extend(!0,i,a),this.elements={},this.parents={},this.form=t,this.firstInvalidField=null,this.isFormValid=!0,Object.defineProperty(this,"_defaults",{get:function(){return i}}),r.call(this),this.form.attr("novalidate","novalidate"),F.push(this)}return m(e,[{key:"validate",value:function(e){var t=this;return this.e=e,this.isStopped=!1,this.isFormValid=!0,(0,p.hideAllNotices)(),Object.keys(this.elements).forEach(function(e){t.elements[e].removeClass("ev-invalid-item ev-valid-item ev-valid-item--first ev-invalid-item--first").data("ev-possibly-error","").data("ev-possibly-valid",""),t.parents[e].removeClass("ev-invalid-item ev-valid-item ev-valid-item--first ev-invalid-item--first")}),this.firstInvalidField=null,this._defaults.groups.length&&f.call(this),v.call(this),this.isFormValid}},{key:"validateGroupField",value:function(e,t,a){var i,n,l,s=this,r=this._defaults,d=t.attr("name"),c=r.groups[a],v=this.elements[d],f=this._defaults.rules[d],m={},h=!0,g=0;return n=this._defaults.names.filter(function(e){return r.rules[e].group===a}),n.forEach(function(e){var t=r.rules[e],a=u.call(s,s.elements[e],t);m[e]=a,a.value&&(g+=1)}),g<c.requiredFields?this.validateField(e,t):(v.removeClass("ev-valid-item ev-invalid-item"),n.forEach(function(e){!m[e].value&&g>=c.requiredFields&&(o(s.elements[e])||(s.elements[e].removeClass("ev-invalid-item"),(0,p.hideNotice)(s.elements[e].closest(".ev-notice-parent").find(".ev-notice"))))}),o(v)||(h=!1),i=u.call(this,v,f),!i.value&&h?(e.preventDefault(),v.addClass("ev-invalid-item"),v.removeClass("ev-valid-item"),l=r.messages[d]&&r.messages[d][i.parameter],(0,p.hideNotice)(v.closest(".ev-notice-parent").find(".ev-notice")),l&&r.showNotice&&((0,p.showNotice)("notice-"+Math.random()+"-"+I,"",v,l),I+=1),r.onSetInvalid(),!1):((0,p.hideNotice)(v.closest(".ev-notice-parent").find(".ev-notice")),h?(v.addClass("ev-valid-item"),r.onSetValid(),!0):null))}},{key:"validateField",value:function(e,t){var a,i,n=t.attr("name"),l=this.elements[n],s=this.parents[n],r=this._defaults.rules[n],d=this._defaults,c=!0,v=!0;return l.removeClass("ev-valid-item ev-invalid-item"),s.removeClass("ev-valid-item ev-invalid-item"),(0,p.hideNotice)(l.closest(".ev-notice-parent").find(".ev-notice")),o(l)||(c=!1),a=u.call(this,l,r),c&&!a.value?(a=u.call(this,l,r),v=!1,e.preventDefault(),l.addClass("ev-invalid-item"),s.addClass("ev-invalid-item"),(i=d.messages[n]&&d.messages[n][a.parameter])&&d.showNotice&&((0,p.showNotice)("notice-"+Math.random()+"-"+I,"",l,i),I+=1)):c&&a.value&&(v=!0,l.addClass("ev-valid-item"),s.addClass("ev-valid-item"),d.onSetValid()),v}}],[{key:"delegateSubmit",value:function(t){var a=e.findInstance(t);if(a)return a.validate(t)}},{key:"findInstance",value:function(t){var a=(0,b.default)(t.target).closest("[data-ev-form]");if(a.length)return e.instances().filter(function(e){return e.form.attr("id")===a.attr("id")})[0]}},{key:"instances",value:function(){return F}},{key:"extendValidationProps",value:function(e){e.forEach(function(e){C.default.helpers.inArray(L,e.name)||Object.prototype.hasOwnProperty.call(h,e.name)||(L.push(e.name),h[e.name]=e.value)})}}]),e}();t.default=S},function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=a(1),l=i(n),s=a(3),r=i(s),o=a(0),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(o);l.default.utils.namespace("forms"),l.default.utils.namespace("forms.notice"),l.default.forms.Validation=r.default,l.default.forms.notice=d}])});