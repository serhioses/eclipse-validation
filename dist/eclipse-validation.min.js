!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("eclipse"),require("jquery"));else if("function"==typeof define&&define.amd)define(["eclipse","jquery"],t);else{var n="object"==typeof exports?t(require("eclipse"),require("jquery")):t(e.eclipse,e.jQuery);for(var a in n)("object"==typeof exports?exports:e)[a]=n[a]}}(this,function(e,t){return function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";function a(){(0,s.default)(".ev-notice").remove()}function i(e){e.remove()}function l(e,t,n,a){var i=(0,s.default)("<div/>");n.length&&!(0,s.default)("#"+e).length&&(i.attr("id",e),i.text(a).addClass("ev-notice "+t).appendTo(n.closest(".ev-notice-parent")),setTimeout(function(){i.addClass("ev-notice--active")},4))}Object.defineProperty(t,"__esModule",{value:!0}),t.hideAllNotices=a,t.hideNotice=i,t.showNotice=l;var r=n(2),s=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t,n){return t.length&&e.length?RegExp(e,"g"+(n?"i":"")).test(t):null}function r(e){return l(b,e.toLowerCase())}function s(){var e=this;this._defaults.names.forEach(function(t){e.elements[t]=e.form.find('[name="'+t+'"]')})}function o(e){return"select-one"===e[0].type?!!e.val()&&"unselectable"!==e.val():"select-multiple"===e[0].type?!!e.val().length&&"unselectable"!==e.val()[0]:"radio"!==e[0].type&&("checkbox"===e[0].type?!!e.filter(":checked").length:!!e.val())}function d(e,t){var n=this,a=this._defaults;return a.names.filter(function(t){var i=n.elements[t];return a.rules[t].group===e&&!i.hasClass("ev-valid-item")&&!a.groups[e].marked[t]&&(a.groups[e].marked[t]=!0,o(i))})}function c(e,t){for(var n=0;n<L.length;n+=1){var a=L[n],i=void 0;if(!e.is(":disabled")&&m[a]&&void 0!==t[a]&&(i=m[a](e,t[a],t.options||{}),!i.value))return i}return{value:!0}}function u(e,t,n,a){var i,l=this,r={},s=this._defaults;if(!s.stopOnInvalid||!this.isStopped)if(n||(n=this._defaults.names.filter(function(t){return s.rules[t].group===e})),n.forEach(function(e){var n=s.rules[e],a=c.call(l,l.elements[e],n);r[e]=a,a.value?(t.countValid+=1,l.elements[e].data("ev-possibly-valid",!0)):l.elements[e].data("ev-possibly-error",!0)}),t.checked=!0,t.countValid>=t.requiredFields&&!a)t.isValid=!0,n.forEach(function(e){l.elements[e].data("ev-possibly-valid")&&(l.elements[e].addClass("ev-valid-item"),s.onSetValid())});else{this.e.preventDefault();try{n.forEach(function(e){if(l.elements[e].data("ev-possibly-error")){if(l.isFormValid=!1,l.elements[e].addClass("ev-invalid-item"),i=s.messages[e]&&s.messages[e][r[e].parameter],i&&s.showNotice&&((0,p.showNotice)("notice-"+Math.random()+"-"+I,"",l.elements[e],i),I+=1),s.onSetInvalid(),l.firstInvalidField?s.setFocus&&l.firstInvalidField.focus():(l.firstInvalidField=l.elements[e],l.firstInvalidField.addClass("ev-invalid-item--first"),s.scrollToInvalid&&y.default.DOM.scrollPage(l.firstInvalidField.closest(".ev-notice-parent"),s.scrollCorrection,s.scrollOptions).then(function(){s.setFocus&&l.firstInvalidField.focus(),s.afterScroll()})),s.stopOnInvalid)throw l.isStopped=!0,Error()}else l.elements[e].addClass("ev-valid-item")})}catch(e){s.onStopOnInvalid()}}}function f(){var e=this;try{this._defaults.names.forEach(function(t){var n,a,i,l,r=e._defaults,s=r.rules[t],f=!0;if(void 0!==s.group)a=r.groups[s.group],a.isValid||a.checked?a.isValid&&(i=d.call(e,s.group,a),i.length&&u.call(e,s.group,a,i,!0)):u.call(e,s.group,a);else if(s.checkIfChanged&&(o(e.elements[t])||(f=!1)),n=c.call(e,e.elements[t],s),e.elements[t].removeClass("ev-valid-item"),!n.value&&f){if(e.isFormValid=!1,r.stopOnInvalid&&e.isStopped)throw Error();if(e.e.preventDefault(),e.elements[t].addClass("ev-invalid-item"),l=r.messages[t]&&r.messages[t][n.parameter],l&&r.showNotice&&((0,p.showNotice)("notice-"+Math.random()+"-"+I,"",e.elements[t],l),I+=1),r.onSetInvalid(),e.firstInvalidField||(e.firstInvalidField=e.elements[t],e.firstInvalidField.addClass("ev-invalid-item--first"),r.scrollToInvalid?y.default.DOM.scrollPage(e.firstInvalidField.closest(".ev-notice-parent"),r.scrollCorrection,r.scrollOptions).then(function(){r.setFocus&&e.firstInvalidField.focus(),r.afterScroll()}):r.setFocus&&e.firstInvalidField.focus()),r.stopOnInvalid)throw e.isStopped=!0,Error()}else e.elements[t].addClass("ev-valid-item"),r.onSetValid()})}catch(e){this._defaults.onStopOnInvalid()}}function v(){this._defaults.groups.forEach(function(e){e.isValid=!1,e.countValid=0,e.checked=!1,e.marked={}})}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.isPattern=l,t.isEmail=r;var m,p=n(0),g=n(1),y=a(g),C=n(2),k=a(C),b="^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$",L=["minLength","maxLength","pattern","checked","selected","equalTo"],F=[],I=0;m={minLength:function(e,t){return{value:e.val().length>=t,parameter:"minLength"}},maxLength:function(e,t){return{value:e.val().length<=t,parameter:"maxLength"}},pattern:function(e,t,n){return this[t]?{value:this[t](e),parameter:"pattern"}:{value:l(t,e.val(),n.ignoreFlag),parameter:"pattern"}},equalTo:function(e,t){return{value:e.val()===(0,k.default)(t).val(),parameter:"equalTo"}},string:function(e){return e.val().length},email:function(e){return r(e.val())},number:function(e){return!isNaN(parseFloat(e.val()))&&isFinite(parseFloat(e.val()))},checked:function(e,t,n){var a=0;return"radio"===e[0].type?{value:1===e.filter(":checked").length,parameter:"checked"}:(e.each(function(){(0,k.default)(this).prop("checked")===t&&(a+=1)}),n.checkedLength?{value:a===n.checkedLength,parameter:"checkedLength"}:n.minCheckedLength&&(a<n.minCheckedLength||!a)?{value:!1,parameter:"minCheckedLength"}:n.maxCheckedLength&&(a>n.maxCheckedLength||!a)?{value:!1,parameter:"maxCheckedLength"}:n.minCheckedLength&&n.maxCheckedLength&&(a<n.minCheckedLength||a>n.maxCheckedLength)?{value:!1,parameter:"rangeCheckedLength"}:{value:a>0,parameter:"checked"})},selected:function(e,t,n){var a=0;return"select-one"===e[0].type?{value:!!e.val()&&"unselectable"!==e.val(),parameter:"selected"}:(e.find("option").each(function(){(0,k.default)(this).prop("selected")&&!(0,k.default)(this).prop("disabled")&&"unselectable"!==(0,k.default)(this).val()&&(a+=1)}),n.selectedLength?{value:a===n.selectedLength,parameter:"selectedLength"}:n.minSelectedLength&&(a<n.minSelectedLength||!a)?{value:!1,parameter:"minSelectedLength"}:n.maxSelectedLength&&(a>n.maxSelectedLength||!a)?{value:!1,parameter:"maxSelectedLength"}:n.minSelectedLength&&n.maxSelectedLength&&(a<n.minSelectedLength||a>n.maxSelectedLength)?{value:!1,parameter:"rangeSelectedLength"}:{value:a>0,parameter:"selected"})}};var S=function(){function e(t,n){i(this,e);var a=Object.create(null);a.rules={},a.names=[],a.groups=[],a.messages={},a.scrollToInvalid=!0,a.scrollCorrection=0,a.scrollOptions={},a.showNotice=!0,a.stopOnInvalid=!0,a.setFocus=!0,a.onSetValid=k.default.noop,a.onSetInvalid=k.default.noop,a.afterScroll=k.default.noop,a.onStopOnInvalid=k.default.noop,"Object"===y.default.helpers.getClass(n)&&k.default.extend(!0,a,n),this.elements={},this.form=t,this.firstInvalidField=null,this.isFormValid=!0,Object.defineProperty(this,"_defaults",{get:function(){return a}}),s.call(this),this.form.attr("novalidate","novalidate"),F.push(this)}return h(e,[{key:"validate",value:function(e){var t=this;return this.e=e,this.isStopped=!1,this.isFormValid=!0,(0,p.hideAllNotices)(),Object.keys(this.elements).forEach(function(e){t.elements[e].removeClass("ev-invalid-item ev-valid-item").data("ev-possibly-error","").data("ev-possibly-valid","")}),this.firstInvalidField=null,this._defaults.groups.length&&v.call(this),f.call(this),this.isFormValid}},{key:"validateGroupField",value:function(e,t,n){var a,i,l,r=this,s=this._defaults,d=t.attr("name"),u=s.groups[n],f=this.elements[d],v=this._defaults.rules[d],h={},m=!0,g=0;return i=this._defaults.names.filter(function(e){return s.rules[e].group===n}),i.forEach(function(e){var t=s.rules[e],n=c.call(r,r.elements[e],t);h[e]=n,n.value&&(g+=1)}),g<u.requiredFields?this.validateField(e,t):(f.removeClass("ev-valid-item ev-invalid-item"),i.forEach(function(e){!h[e].value&&g>=u.requiredFields&&(o(r.elements[e])||(r.elements[e].removeClass("ev-invalid-item"),(0,p.hideNotice)(r.elements[e].closest(".ev-notice-parent").find(".ev-notice"))))}),o(f)||(m=!1),a=c.call(this,f,v),!a.value&&m?(e.preventDefault(),f.addClass("ev-invalid-item"),f.removeClass("ev-valid-item"),l=s.messages[d]&&s.messages[d][a.parameter],(0,p.hideNotice)(f.closest(".ev-notice-parent").find(".ev-notice")),l&&s.showNotice&&((0,p.showNotice)("notice-"+Math.random()+"-"+I,"",f,l),I+=1),s.onSetInvalid(),!1):((0,p.hideNotice)(f.closest(".ev-notice-parent").find(".ev-notice")),m?(f.addClass("ev-valid-item"),s.onSetValid(),!0):null))}},{key:"validateField",value:function(e,t){var n,a,i=t.attr("name"),l=this.elements[i],r=this._defaults.rules[i],s=this._defaults,d=!0,u=!0;return l.removeClass("ev-valid-item ev-invalid-item"),r.checkIfChanged&&(o(l)||(d=!1)),n=c.call(this,l,r),!n.value&&d?(u=!1,e.preventDefault(),l.addClass("ev-invalid-item"),l.removeClass("ev-valid-item"),a=s.messages[i]&&s.messages[i][n.parameter],(0,p.hideNotice)(l.closest(".ev-notice-parent").find(".ev-notice")),a&&s.showNotice&&((0,p.showNotice)("notice-"+Math.random()+"-"+I,"",l,a),I+=1),s.onSetInvalid()):d&&((0,p.hideNotice)(l.closest(".ev-notice-parent").find(".ev-notice")),l.addClass("ev-valid-item"),s.onSetValid()),u}}],[{key:"delegateSubmit",value:function(t){var n=e.findInstance(t);if(n)return n.validate(t)}},{key:"findInstance",value:function(t){var n=(0,k.default)(t.target).closest("[data-ev-form]");if(n.length)return e.instances().filter(function(e){return e.form.attr("id")===n.attr("id")})[0]}},{key:"instances",value:function(){return F}},{key:"extendValidationProps",value:function(e){e.forEach(function(e){y.default.helpers.inArray(L,e.name)||Object.prototype.hasOwnProperty.call(m,e.name)||(L.push(e.name),m[e.name]=e.value)})}}]),e}();t.default=S},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var i=n(1),l=a(i),r=n(3),s=a(r),o=n(0),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o);l.default.utils.namespace("forms"),l.default.utils.namespace("forms.notice"),l.default.forms.Validation=s.default,l.default.forms.notice=d}])});